import os
import csv
from datetime import datetime
class paciente: 
    pacientes = []
    def __init__(self, name, age, ID, lastname):
        self.__name = name
        self.__age = age
        self.__lastname = lastname
        self.__ID: ID
    
    def name(self):
        return self.__name

    def lastname(self):
        return self.__lastname

    def age(self):
        return self.__age

    def ID(self):
        return self.__ID
    
    def agregar_paciente(self, name, age, ID, lastname):
        if not self.verificar_identificacion_existente(ID):
            paciente = paciente(name,lastname, age, ID)
            self.pacientes.append(paciente)
            return True
        else: 
             return False
    def verificar_existencia(self, ID):
        for pacientes in self.pacientes:
            if paciente.ID == ID:
                return True
        return False

    def guardar_pacientes(self, archivo):
        with open(archivo, 'w', newline = '') as file:
            write = csv.writer(file)
            write.writerow(['Nombre', 'Apellido', 'Edad', 'ID'])
            for paciente in self.pacientes:
                write.writerow([paciente.name, paciente.lastname, paciente.age, paciente.ID])

    def cargar_pacientes_desde_archivo(self, archivo):
        self.pacientes = []
        with open(archivo, 'r') as file:
            reader = csv.DictReader(file)
            for row in reader:
                paciente = self(row['Nombre'], row['Apellido'], int(row['edad']), row['ID'])
                self.pacientes.append(paciente)
                